@page "/apidocs"
@using System.Text.Json

<PageTitle>Documentaci칩n API - Climaguate</PageTitle>
<head>
  <title>Documentaci칩n API - Climaguate</title>
  <meta name="description" content="Documentaci칩n de los endpoints REST de Climaguate. Ejemplos de solicitudes, respuestas y par치metros para clima, calidad del aire y cultivos." />
</head>

<h1 style="color:#2B4C6F; font-size:1.8rem;">游닄 Documentaci칩n API</h1>
<hr style="border-color:#7BCDC8; border-width:2px;" />

<div style="font-size:0.85rem; line-height:1.6;">
    <p>
        Esta p치gina describe los endpoints REST disponibles en Climaguate.<br/>
        Todos los endpoints son p칰blicos y devuelven datos en formato JSON.
    </p>

    <h2 style="color:#2B4C6F; font-size:1.1rem;">URL Base</h2>
    <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">https://climaguate.com/data-api/rest/</pre>

    <h2 style="color:#2B4C6F; font-size:1.1rem;">Endpoints</h2>

    <!-- GetCities -->
    <div class="card mb-4" style="font-size:0.85rem;">
        <div class="card-header bg-primary text-white">GET /GetCities</div>
        <div class="card-body">
            <p>Devuelve la lista de ciudades disponibles en la base de datos.</p>
            <strong>Ejemplo de solicitud:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">GET /data-api/rest/GetCities</pre>
            <strong>Respuesta:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">{
  "value": [
    {
      "CityCode": "GUA",
      "CityName": "Ciudad de Guatemala",
      "ElevationMeters": 1500,
      "SoilType": "Andosol",
      "ClimateZone": "Cwb"
    },
    // ...m치s ciudades
  ]
}</pre>
        </div>
    </div>

    <!-- GetWeatherCity -->
    <div class="card mb-4" style="font-size:0.85rem;">
        <div class="card-header bg-primary text-white">GET /GetWeatherCity?CityCode=GUA</div>
        <div class="card-body">
            <p>Devuelve datos meteorol칩gicos actuales e hist칩ricos para una ciudad.</p>
            <strong>Par치metros:</strong>
            <ul>
                <li><code>CityCode</code> (string, requerido) - C칩digo de ciudad (ejemplo: "GUA")</li>
            </ul>
            <strong>Ejemplo de solicitud:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">GET /data-api/rest/GetWeatherCity?CityCode=GUA</pre>
            <strong>Respuesta:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">{
  "value": [
    {
      "Name": "Ciudad de Guatemala",
      "Main_Temp": 22.5,
      "Main_Humidity": 70,
      "Weather_Description": "Nublado",
      // ...m치s campos
    },
    // ...m치s lecturas
  ]
}</pre>
        </div>
    </div>

    <!-- GetWeatherForecast -->
    <div class="card mb-4" style="font-size:0.85rem;">
        <div class="card-header bg-primary text-white">GET /GetWeatherForecast?CityCode=GUA</div>
        <div class="card-body">
            <p>Devuelve el pron칩stico meteorol칩gico para una ciudad.</p>
            <strong>Par치metros:</strong>
            <ul>
                <li><code>CityCode</code> (string, requerido)</li>
            </ul>
            <strong>Ejemplo de solicitud:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">GET /data-api/rest/GetWeatherForecast?CityCode=GUA</pre>
            <strong>Respuesta:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">{
  "value": [
    {
      "Name": "Ciudad de Guatemala",
      "Forecast_Temp": 23.0,
      "Forecast_Humidity": 65,
      // ...m치s campos
    },
    // ...m치s pron칩sticos
  ]
}</pre>
        </div>
    </div>

    <!-- GetLatestAirQuality -->
    <div class="card mb-4" style="font-size:0.85rem;">
        <div class="card-header bg-primary text-white">GET /GetLatestAirQuality?CityCode=GUA</div>
        <div class="card-body">
            <p>Devuelve los datos m치s recientes de calidad del aire para una ciudad.</p>
            <strong>Par치metros:</strong>
            <ul>
                <li><code>CityCode</code> (string, requerido)</li>
            </ul>
            <strong>Ejemplo de solicitud:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">GET /data-api/rest/GetLatestAirQuality?CityCode=GUA</pre>
            <strong>Respuesta:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">{
  "value": [
    {
      "CityCode": "GUA",
      "AQI": 2,
      "CategorySpanish": "Aceptable",
      // ...m치s campos
    }
  ]
}</pre>
        </div>
    </div>

    <!-- GetCropsByCity -->
    <div class="card mb-4" style="font-size:0.85rem;">
        <div class="card-header bg-success text-white">GET /GetCropsByCity?CityCode=GUA</div>
        <div class="card-body">
            <p>Devuelve la aptitud y detalles de cultivos para una ciudad.</p>
            <strong>Par치metros:</strong>
            <ul>
                <li><code>CityCode</code> (string, requerido)</li>
            </ul>
            <strong>Ejemplo de solicitud:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">GET /data-api/rest/GetCropsByCity?CityCode=GUA</pre>
            <strong>Respuesta:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">{
  "value": [
    {
      "CropCode": "MAIZ",
      "CropNameSpanish": "Ma칤z",
      "CurrentSuitabilityScore": 85,
      // ...m치s campos
    },
    // ...m치s cultivos
  ]
}</pre>
        </div>
    </div>

    <!-- GetCrops -->
    <div class="card mb-4" style="font-size:0.85rem;">
        <div class="card-header bg-success text-white">GET /GetCrops?CropCode=MAIZ</div>
        <div class="card-body">
            <p>Devuelve informaci칩n detallada para un cultivo espec칤fico.</p>
            <strong>Par치metros:</strong>
            <ul>
                <li><code>CropCode</code> (string, requerido)</li>
            </ul>
            <strong>Ejemplo de solicitud:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">GET /data-api/rest/GetCrops?CropCode=MAIZ</pre>
            <strong>Respuesta:</strong>
            <pre style="background:#f8f9fa; border-radius:6px; padding:8px;">{
  "value": [
    {
      "CropCode": "MAIZ",
      "CropNameSpanish": "Ma칤z",
      "Description": "Cereal b치sico en Guatemala.",
      // ...m치s campos
    }
  ]
}</pre>
        </div>
    </div>

  <h2 style="color:#2B4C6F; font-size:1.1rem;">Autenticaci칩n</h2>
  <div class="alert alert-info" style="font-size:0.85rem;">
    Todos los endpoints son p칰blicos (acceso an칩nimo). No se requiere autenticaci칩n.
  </div>

  <h2 style="color:#2B4C6F; font-size:1.1rem;">Notas</h2>
  <ul>
    <li>Las respuestas est치n en formato JSON.</li>
    <li>Los par치metros se env칤an como query string.</li>
    <li>Para m치s detalles, consulta la <a href="https://github.com/Azure/data-api-builder">documentaci칩n oficial de Azure Data API Builder</a>.</li>
  </ul>
</div>
